<div class="text-center mb-6 sm:mb-8">
    <h1 class="text-xl sm:text-2xl font-semibold text-primary mb-2">{{authorName}}</h1>
    <p class="text-secondary text-base sm:text-lg">{{books.length}} books by this author</p>
</div>

<div class="bookshelf-container">
    <div class="covers-shelf">
        {{#each books}}
        {{> book-cover this}}
        {{/each}}
    </div>
</div>

<script>
// Book filtering and sorting functionality
function displayBooks() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const bookCards = Array.from(document.querySelectorAll('.grid > div'));
    let visibleCount = 0;
    
    bookCards.forEach(card => {
        const title = card.querySelector('h3')?.textContent?.toLowerCase() || '';
        const category = card.querySelector('[data-category]')?.dataset?.category?.toLowerCase() || '';
        
        const matchesSearch = title.includes(searchTerm) || category.includes(searchTerm);
        card.style.display = matchesSearch ? 'block' : 'none';
        
        if (matchesSearch) visibleCount++;
    });
}

function sortBooks() {
    const sortBy = document.getElementById('sortBy').value;
    const bookCards = Array.from(document.querySelectorAll('.grid > div'));
    const booksGrid = document.querySelector('.grid');
    
    bookCards.sort((a, b) => {
        const aTitle = a.querySelector('h3')?.textContent?.toLowerCase() || '';
        const bTitle = b.querySelector('h3')?.textContent?.toLowerCase() || '';
        return aTitle.localeCompare(bTitle);
    });
    
    // Reorder DOM elements
    bookCards.forEach(card => booksGrid.appendChild(card));
}

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const sortBy = document.getElementById('sortBy');
    
    if (searchInput) searchInput.addEventListener('input', displayBooks);
    if (sortBy) sortBy.addEventListener('change', sortBooks);
    
    // Initial display
    displayBooks();
});
</script>
